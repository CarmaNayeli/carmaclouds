{
  "version": 3,
  "sources": ["../../../../../src/popup/adapters/owlcloud/adapter.js"],
  "sourcesContent": ["/**\r\n * OwlCloud Adapter\r\n * Owlbear Rodeo integration for CarmaClouds\r\n * Loads the full OwlCloud popup UI\r\n */\r\n\r\n// Detect browser API (Firefox uses 'browser', Chrome uses 'chrome')\r\nconst browserAPI = (typeof browser !== 'undefined' && browser.runtime) ? browser : chrome;\r\n\r\nexport async function init(containerEl) {\r\n  console.log('Initializing OwlCloud adapter...');\r\n\r\n  try {\r\n    // Show loading state\r\n    containerEl.innerHTML = '<div class=\"loading\">Loading OwlCloud...</div>';\r\n\r\n    // Fetch synced characters and DiceCloud user ID from storage\r\n    const result = await browserAPI.storage.local.get(['carmaclouds_characters', 'diceCloudUserId']) || {};\r\n    const characters = result.carmaclouds_characters || [];\r\n    const diceCloudUserId = result.diceCloudUserId;\r\n\r\n    console.log('Found', characters.length, 'synced characters');\r\n    console.log('DiceCloud User ID:', diceCloudUserId);\r\n\r\n    // Get the most recent character (for now - later we'll add character selection)\r\n    const character = characters.length > 0 ? characters[0] : null;\r\n\r\n    // Fetch the OwlCloud popup HTML\r\n    const htmlPath = browserAPI.runtime.getURL('src/popup/adapters/owlcloud/popup.html');\r\n    const response = await fetch(htmlPath);\r\n    const html = await response.text();\r\n\r\n    // Extract only the main content (not the full HTML document with header/footer)\r\n    const parser = new DOMParser();\r\n    const doc = parser.parseFromString(html, 'text/html');\r\n    const mainContent = doc.querySelector('main');\r\n\r\n    // Wrap content in a scoped container to prevent CSS conflicts\r\n    const wrapper = document.createElement('div');\r\n    wrapper.className = 'owlcloud-adapter-scope';\r\n    wrapper.innerHTML = mainContent ? mainContent.innerHTML : doc.body.innerHTML;\r\n    containerEl.innerHTML = '';\r\n    containerEl.appendChild(wrapper);\r\n\r\n    // Load and inject the CSS with scoping\r\n    const cssPath = browserAPI.runtime.getURL('src/popup/adapters/owlcloud/popup.css');\r\n    const cssResponse = await fetch(cssPath);\r\n    let css = await cssResponse.text();\r\n\r\n    // Scope all CSS rules to the adapter container\r\n    css = css.replace(/(^|\\})\\s*([^{}@]+)\\s*\\{/gm, (match, closer, selector) => {\r\n      // Don't scope @media, @keyframes, etc.\r\n      if (selector.trim().startsWith('@')) return match;\r\n      // Scope the selector\r\n      const scopedSelector = selector.split(',').map(s => `.owlcloud-adapter-scope ${s.trim()}`).join(', ');\r\n      return `${closer} ${scopedSelector} {`;\r\n    });\r\n\r\n    const style = document.createElement('style');\r\n    style.textContent = css;\r\n    containerEl.appendChild(style);\r\n\r\n    const SUPABASE_URL = 'https://luiesmfjdcmpywavvfqm.supabase.co';\r\n    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx1aWVzbWZqZGNtcHl3YXZ2ZnFtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk4ODYxNDksImV4cCI6MjA4NTQ2MjE0OX0.oqjHFf2HhCLcanh0HVryoQH7iSV7E9dHHZJdYehxZ0U';\r\n\r\n    const loginPrompt = wrapper.querySelector('#loginPrompt');\r\n    const syncBox = wrapper.querySelector('#syncBox');\r\n    const pushedCharactersList = wrapper.querySelector('#pushedCharactersList');\r\n    const noPushedCharacters = wrapper.querySelector('#noPushedCharacters');\r\n\r\n    // Function to fetch and display pushed characters from database\r\n    async function loadPushedCharacters() {\r\n      if (!diceCloudUserId || !pushedCharactersList) return;\r\n\r\n      try {\r\n        const response = await fetch(\r\n          `${SUPABASE_URL}/rest/v1/clouds_characters?user_id_dicecloud=eq.${diceCloudUserId}&select=dicecloud_character_id,character_name,level,class,race`,\r\n          {\r\n            headers: {\r\n              'apikey': SUPABASE_ANON_KEY,\r\n              'Authorization': `Bearer ${SUPABASE_ANON_KEY}`\r\n            }\r\n          }\r\n        );\r\n\r\n        if (response.ok) {\r\n          const pushedChars = await response.json();\r\n          pushedCharactersList.innerHTML = '';\r\n\r\n          if (pushedChars.length > 0) {\r\n            if (noPushedCharacters) noPushedCharacters.classList.add('hidden');\r\n\r\n            pushedChars.forEach(char => {\r\n              const card = document.createElement('div');\r\n              card.style.cssText = 'background: #1a1a1a; padding: 12px; border-radius: 8px; border: 1px solid #333;';\r\n              card.innerHTML = `\r\n                <h4 style=\"color: #16a75a; margin: 0 0 6px 0; font-size: 14px;\">${char.character_name || 'Unknown'}</h4>\r\n                <div style=\"display: flex; gap: 8px; font-size: 12px; color: #888;\">\r\n                  <span>Lvl ${char.level || '?'}</span>\r\n                  <span>\u2022</span>\r\n                  <span>${char.class || 'Unknown'}</span>\r\n                  <span>\u2022</span>\r\n                  <span>${char.race || 'Unknown'}</span>\r\n                </div>\r\n              `;\r\n              pushedCharactersList.appendChild(card);\r\n            });\r\n          } else {\r\n            if (noPushedCharacters) noPushedCharacters.classList.remove('hidden');\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to load pushed characters:', error);\r\n      }\r\n    }\r\n\r\n    // Check if user is logged in to BOTH DiceCloud AND Supabase\r\n    const supabase = window.supabaseClient;\r\n    let supabaseUserId = null;\r\n    if (supabase) {\r\n      const { data: { session } } = await supabase.auth.getSession();\r\n      supabaseUserId = session?.user?.id;\r\n    }\r\n\r\n    if (!diceCloudUserId || !supabaseUserId) {\r\n      // Show login prompt - need both logins\r\n      if (loginPrompt) {\r\n        loginPrompt.classList.remove('hidden');\r\n        const titleEl = loginPrompt.querySelector('h3');\r\n        const promptText = loginPrompt.querySelector('p');\r\n        const openAuthBtn = loginPrompt.querySelector('#openAuthModalBtn');\r\n\r\n        if (!diceCloudUserId) {\r\n          // DiceCloud not logged in - show standard DiceCloud login prompt\r\n          if (titleEl) titleEl.textContent = 'Login Required';\r\n          if (promptText) promptText.textContent = 'Please login to DiceCloud to sync your characters.';\r\n          if (openAuthBtn) {\r\n            openAuthBtn.textContent = '\uD83D\uDD10 Login to DiceCloud';\r\n            openAuthBtn.addEventListener('click', () => {\r\n              // Trigger the main popup's DiceCloud auth modal\r\n              const authButton = document.querySelector('#dicecloud-auth-button');\r\n              if (authButton) authButton.click();\r\n            });\r\n          }\r\n        } else {\r\n          // DiceCloud logged in but Supabase not - show \"heads up\" notification\r\n          if (titleEl) titleEl.textContent = '\u26A0\uFE0F Heads Up!';\r\n          if (promptText) {\r\n            promptText.innerHTML = 'To auto-sync characters, you need a database username and password. <strong>It is NOT your DiceCloud login.</strong> Please register or sign in below.';\r\n          }\r\n          if (openAuthBtn) {\r\n            openAuthBtn.textContent = '\uD83D\uDC64 Go to Account Tab';\r\n            openAuthBtn.addEventListener('click', () => {\r\n              // Open the auth modal first\r\n              const authButton = document.querySelector('#dicecloud-auth-button');\r\n              if (authButton) authButton.click();\r\n\r\n              // Then switch to the Account (Supabase) tab manually\r\n              setTimeout(() => {\r\n                // Deactivate DiceCloud tab\r\n                const dicecloudTab = document.querySelector('[data-auth-tab=\"dicecloud\"]');\r\n                const dicecloudContent = document.querySelector('#dicecloud-auth-content');\r\n                if (dicecloudTab) dicecloudTab.classList.remove('active');\r\n                if (dicecloudContent) dicecloudContent.classList.remove('active');\r\n\r\n                // Activate Supabase tab\r\n                const supabaseTab = document.querySelector('[data-auth-tab=\"supabase\"]');\r\n                const supabaseContent = document.querySelector('#supabase-auth-content');\r\n                if (supabaseTab) supabaseTab.classList.add('active');\r\n                if (supabaseContent) {\r\n                  supabaseContent.classList.add('active');\r\n                  supabaseContent.style.display = 'block';\r\n                }\r\n              }, 100);\r\n            });\r\n          }\r\n        }\r\n      }\r\n      if (syncBox) syncBox.classList.add('hidden');\r\n    } else if (characters.length > 0 && characters[0]?.raw) {\r\n      // User is logged in and has character data - show sync box\r\n      const character = characters[0];\r\n\r\n      if (loginPrompt) loginPrompt.classList.add('hidden');\r\n      if (syncBox) syncBox.classList.remove('hidden');\r\n\r\n      // Populate sync box with current character\r\n      const nameEl = wrapper.querySelector('#syncCharName');\r\n      const levelEl = wrapper.querySelector('#syncCharLevel');\r\n      const classEl = wrapper.querySelector('#syncCharClass');\r\n      const raceEl = wrapper.querySelector('#syncCharRace');\r\n\r\n      if (nameEl) nameEl.textContent = character.name || 'Unknown';\r\n      if (levelEl) levelEl.textContent = `Lvl ${character.preview?.level || '?'}`;\r\n      if (classEl) classEl.textContent = character.preview?.class || 'Unknown';\r\n      if (raceEl) raceEl.textContent = character.preview?.race || 'Unknown';\r\n\r\n      // Add push to VTT button handler\r\n      const pushBtn = wrapper.querySelector('#pushToVttBtn');\r\n      if (pushBtn) {\r\n        pushBtn.addEventListener('click', async () => {\r\n          const originalText = pushBtn.innerHTML;\r\n          try {\r\n            pushBtn.disabled = true;\r\n            pushBtn.innerHTML = '\u23F3 Pushing...';\r\n\r\n            // Get Supabase user ID if authenticated\r\n            const supabase = window.supabaseClient;\r\n            let supabaseUserId = null;\r\n            if (supabase) {\r\n              const { data: { session } } = await supabase.auth.getSession();\r\n              supabaseUserId = session?.user?.id;\r\n            }\r\n\r\n            // Prepare character data with ALL info including supabase_user_id\r\n            const characterData = {\r\n              dicecloud_character_id: character.id,\r\n              character_name: character.name || 'Unknown',\r\n              user_id_dicecloud: diceCloudUserId,\r\n              level: character.preview?.level || null,\r\n              class: character.preview?.class || null,\r\n              race: character.preview?.race || null,\r\n              raw_dicecloud_data: character.raw,\r\n              is_active: false,\r\n              updated_at: new Date().toISOString()\r\n            };\r\n\r\n            // Include Supabase user ID for cross-device sync\r\n            if (supabaseUserId) {\r\n              characterData.supabase_user_id = supabaseUserId;\r\n              console.log('\u2705 Including Supabase user ID:', supabaseUserId);\r\n            }\r\n\r\n            // Push to database\r\n            const response = await fetch(\r\n              `${SUPABASE_URL}/rest/v1/clouds_characters?on_conflict=user_id_dicecloud,dicecloud_character_id`,\r\n              {\r\n                method: 'POST',\r\n                headers: {\r\n                  'apikey': SUPABASE_ANON_KEY,\r\n                  'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,\r\n                  'Content-Type': 'application/json',\r\n                  'Prefer': 'resolution=merge-duplicates,return=representation'\r\n                },\r\n                body: JSON.stringify(characterData)\r\n              }\r\n            );\r\n\r\n            if (response.ok) {\r\n              console.log('\u2705 Character pushed:', character.name);\r\n              pushBtn.innerHTML = '\u2705 Pushed!';\r\n\r\n              // Reload pushed characters list\r\n              await loadPushedCharacters();\r\n\r\n              setTimeout(() => {\r\n                pushBtn.innerHTML = originalText;\r\n                pushBtn.disabled = false;\r\n              }, 2000);\r\n            } else {\r\n              const errorText = await response.text();\r\n              throw new Error(`Push failed: ${errorText}`);\r\n            }\r\n          } catch (error) {\r\n            console.error('Error pushing character:', error);\r\n            pushBtn.innerHTML = '\u274C Failed';\r\n            alert(`Failed to push: ${error.message}`);\r\n            setTimeout(() => {\r\n              pushBtn.innerHTML = originalText;\r\n              pushBtn.disabled = false;\r\n            }, 2000);\r\n          }\r\n        });\r\n      }\r\n\r\n      // Load and display pushed characters\r\n      await loadPushedCharacters();\r\n    } else {\r\n      // Logged in but no character data from DiceCloud\r\n      if (loginPrompt) loginPrompt.classList.add('hidden');\r\n      if (syncBox) syncBox.classList.add('hidden');\r\n      if (noPushedCharacters) {\r\n        noPushedCharacters.textContent = 'No character data found. Sync a character from DiceCloud first.';\r\n        noPushedCharacters.classList.remove('hidden');\r\n      }\r\n    }\r\n\r\n    // Add copy button handler\r\n    const copyBtn = wrapper.querySelector('#copyOwlbearUrlBtn');\r\n    if (copyBtn) {\r\n      copyBtn.addEventListener('click', async () => {\r\n        const urlInput = wrapper.querySelector('#owlbearExtensionUrl');\r\n        if (urlInput) {\r\n          try {\r\n            await navigator.clipboard.writeText(urlInput.value);\r\n            const originalText = copyBtn.textContent;\r\n            copyBtn.textContent = '\u2713 Copied!';\r\n            setTimeout(() => {\r\n              copyBtn.textContent = originalText;\r\n            }, 2000);\r\n          } catch (err) {\r\n            console.error('Failed to copy:', err);\r\n            copyBtn.textContent = '\u2717 Failed';\r\n            setTimeout(() => {\r\n              copyBtn.textContent = 'Copy';\r\n            }, 2000);\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    // Listen for Supabase auth state changes to refresh the UI\r\n    if (supabase) {\r\n      supabase.auth.onAuthStateChange((event, session) => {\r\n        console.log('\uD83D\uDD10 OwlCloud adapter detected Supabase auth change:', event);\r\n        // Reload the entire adapter when auth state changes\r\n        init(containerEl);\r\n      });\r\n    }\r\n\r\n    // Listen for data sync notifications to refresh the UI\r\n    browserAPI.runtime.onMessage.addListener((message, sender, sendResponse) => {\r\n      if (message.action === 'dataSynced') {\r\n        console.log('\uD83D\uDCE5 OwlCloud adapter received data sync notification:', message.characterName);\r\n        // Reload the entire adapter to show updated character data\r\n        init(containerEl);\r\n      }\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error('Failed to load OwlCloud UI:', error);\r\n    containerEl.innerHTML = `\r\n      <div class=\"error\">\r\n        <strong>Failed to load OwlCloud</strong>\r\n        <p>${error.message}</p>\r\n      </div>\r\n    `;\r\n  }\r\n}\r\n"],
  "mappings": ";;AAOA,MAAM,aAAc,OAAO,YAAY,eAAe,QAAQ,UAAW,UAAU;AAEnF,iBAAsB,KAAK,aAAa;AACtC,YAAQ,IAAI,kCAAkC;AAE9C,QAAI;AAEF,kBAAY,YAAY;AAGxB,YAAM,SAAS,MAAM,WAAW,QAAQ,MAAM,IAAI,CAAC,0BAA0B,iBAAiB,CAAC,KAAK,CAAC;AACrG,YAAM,aAAa,OAAO,0BAA0B,CAAC;AACrD,YAAM,kBAAkB,OAAO;AAE/B,cAAQ,IAAI,SAAS,WAAW,QAAQ,mBAAmB;AAC3D,cAAQ,IAAI,sBAAsB,eAAe;AAGjD,YAAM,YAAY,WAAW,SAAS,IAAI,WAAW,CAAC,IAAI;AAG1D,YAAM,WAAW,WAAW,QAAQ,OAAO,wCAAwC;AACnF,YAAM,WAAW,MAAM,MAAM,QAAQ;AACrC,YAAM,OAAO,MAAM,SAAS,KAAK;AAGjC,YAAM,SAAS,IAAI,UAAU;AAC7B,YAAM,MAAM,OAAO,gBAAgB,MAAM,WAAW;AACpD,YAAM,cAAc,IAAI,cAAc,MAAM;AAG5C,YAAM,UAAU,SAAS,cAAc,KAAK;AAC5C,cAAQ,YAAY;AACpB,cAAQ,YAAY,cAAc,YAAY,YAAY,IAAI,KAAK;AACnE,kBAAY,YAAY;AACxB,kBAAY,YAAY,OAAO;AAG/B,YAAM,UAAU,WAAW,QAAQ,OAAO,uCAAuC;AACjF,YAAM,cAAc,MAAM,MAAM,OAAO;AACvC,UAAI,MAAM,MAAM,YAAY,KAAK;AAGjC,YAAM,IAAI,QAAQ,6BAA6B,CAAC,OAAO,QAAQ,aAAa;AAE1E,YAAI,SAAS,KAAK,EAAE,WAAW,GAAG;AAAG,iBAAO;AAE5C,cAAM,iBAAiB,SAAS,MAAM,GAAG,EAAE,IAAI,OAAK,2BAA2B,EAAE,KAAK,CAAC,EAAE,EAAE,KAAK,IAAI;AACpG,eAAO,GAAG,MAAM,IAAI,cAAc;AAAA,MACpC,CAAC;AAED,YAAM,QAAQ,SAAS,cAAc,OAAO;AAC5C,YAAM,cAAc;AACpB,kBAAY,YAAY,KAAK;AAE7B,YAAM,eAAe;AACrB,YAAM,oBAAoB;AAE1B,YAAM,cAAc,QAAQ,cAAc,cAAc;AACxD,YAAM,UAAU,QAAQ,cAAc,UAAU;AAChD,YAAM,uBAAuB,QAAQ,cAAc,uBAAuB;AAC1E,YAAM,qBAAqB,QAAQ,cAAc,qBAAqB;AAGtE,qBAAe,uBAAuB;AACpC,YAAI,CAAC,mBAAmB,CAAC;AAAsB;AAE/C,YAAI;AACF,gBAAMA,YAAW,MAAM;AAAA,YACrB,GAAG,YAAY,mDAAmD,eAAe;AAAA,YACjF;AAAA,cACE,SAAS;AAAA,gBACP,UAAU;AAAA,gBACV,iBAAiB,UAAU,iBAAiB;AAAA,cAC9C;AAAA,YACF;AAAA,UACF;AAEA,cAAIA,UAAS,IAAI;AACf,kBAAM,cAAc,MAAMA,UAAS,KAAK;AACxC,iCAAqB,YAAY;AAEjC,gBAAI,YAAY,SAAS,GAAG;AAC1B,kBAAI;AAAoB,mCAAmB,UAAU,IAAI,QAAQ;AAEjE,0BAAY,QAAQ,UAAQ;AAC1B,sBAAM,OAAO,SAAS,cAAc,KAAK;AACzC,qBAAK,MAAM,UAAU;AACrB,qBAAK,YAAY;AAAA,kFACmD,KAAK,kBAAkB,SAAS;AAAA;AAAA,8BAEpF,KAAK,SAAS,GAAG;AAAA;AAAA,0BAErB,KAAK,SAAS,SAAS;AAAA;AAAA,0BAEvB,KAAK,QAAQ,SAAS;AAAA;AAAA;AAGlC,qCAAqB,YAAY,IAAI;AAAA,cACvC,CAAC;AAAA,YACH,OAAO;AACL,kBAAI;AAAoB,mCAAmB,UAAU,OAAO,QAAQ;AAAA,YACtE;AAAA,UACF;AAAA,QACF,SAAS,OAAO;AACd,kBAAQ,MAAM,qCAAqC,KAAK;AAAA,QAC1D;AAAA,MACF;AAGA,YAAM,WAAW,OAAO;AACxB,UAAI,iBAAiB;AACrB,UAAI,UAAU;AACZ,cAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,MAAM,SAAS,KAAK,WAAW;AAC7D,yBAAiB,SAAS,MAAM;AAAA,MAClC;AAEA,UAAI,CAAC,mBAAmB,CAAC,gBAAgB;AAEvC,YAAI,aAAa;AACf,sBAAY,UAAU,OAAO,QAAQ;AACrC,gBAAM,UAAU,YAAY,cAAc,IAAI;AAC9C,gBAAM,aAAa,YAAY,cAAc,GAAG;AAChD,gBAAM,cAAc,YAAY,cAAc,mBAAmB;AAEjE,cAAI,CAAC,iBAAiB;AAEpB,gBAAI;AAAS,sBAAQ,cAAc;AACnC,gBAAI;AAAY,yBAAW,cAAc;AACzC,gBAAI,aAAa;AACf,0BAAY,cAAc;AAC1B,0BAAY,iBAAiB,SAAS,MAAM;AAE1C,sBAAM,aAAa,SAAS,cAAc,wBAAwB;AAClE,oBAAI;AAAY,6BAAW,MAAM;AAAA,cACnC,CAAC;AAAA,YACH;AAAA,UACF,OAAO;AAEL,gBAAI;AAAS,sBAAQ,cAAc;AACnC,gBAAI,YAAY;AACd,yBAAW,YAAY;AAAA,YACzB;AACA,gBAAI,aAAa;AACf,0BAAY,cAAc;AAC1B,0BAAY,iBAAiB,SAAS,MAAM;AAE1C,sBAAM,aAAa,SAAS,cAAc,wBAAwB;AAClE,oBAAI;AAAY,6BAAW,MAAM;AAGjC,2BAAW,MAAM;AAEf,wBAAM,eAAe,SAAS,cAAc,6BAA6B;AACzE,wBAAM,mBAAmB,SAAS,cAAc,yBAAyB;AACzE,sBAAI;AAAc,iCAAa,UAAU,OAAO,QAAQ;AACxD,sBAAI;AAAkB,qCAAiB,UAAU,OAAO,QAAQ;AAGhE,wBAAM,cAAc,SAAS,cAAc,4BAA4B;AACvE,wBAAM,kBAAkB,SAAS,cAAc,wBAAwB;AACvE,sBAAI;AAAa,gCAAY,UAAU,IAAI,QAAQ;AACnD,sBAAI,iBAAiB;AACnB,oCAAgB,UAAU,IAAI,QAAQ;AACtC,oCAAgB,MAAM,UAAU;AAAA,kBAClC;AAAA,gBACF,GAAG,GAAG;AAAA,cACR,CAAC;AAAA,YACH;AAAA,UACF;AAAA,QACF;AACA,YAAI;AAAS,kBAAQ,UAAU,IAAI,QAAQ;AAAA,MAC7C,WAAW,WAAW,SAAS,KAAK,WAAW,CAAC,GAAG,KAAK;AAEtD,cAAMC,aAAY,WAAW,CAAC;AAE9B,YAAI;AAAa,sBAAY,UAAU,IAAI,QAAQ;AACnD,YAAI;AAAS,kBAAQ,UAAU,OAAO,QAAQ;AAG9C,cAAM,SAAS,QAAQ,cAAc,eAAe;AACpD,cAAM,UAAU,QAAQ,cAAc,gBAAgB;AACtD,cAAM,UAAU,QAAQ,cAAc,gBAAgB;AACtD,cAAM,SAAS,QAAQ,cAAc,eAAe;AAEpD,YAAI;AAAQ,iBAAO,cAAcA,WAAU,QAAQ;AACnD,YAAI;AAAS,kBAAQ,cAAc,OAAOA,WAAU,SAAS,SAAS,GAAG;AACzE,YAAI;AAAS,kBAAQ,cAAcA,WAAU,SAAS,SAAS;AAC/D,YAAI;AAAQ,iBAAO,cAAcA,WAAU,SAAS,QAAQ;AAG5D,cAAM,UAAU,QAAQ,cAAc,eAAe;AACrD,YAAI,SAAS;AACX,kBAAQ,iBAAiB,SAAS,YAAY;AAC5C,kBAAM,eAAe,QAAQ;AAC7B,gBAAI;AACF,sBAAQ,WAAW;AACnB,sBAAQ,YAAY;AAGpB,oBAAMC,YAAW,OAAO;AACxB,kBAAIC,kBAAiB;AACrB,kBAAID,WAAU;AACZ,sBAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,MAAMA,UAAS,KAAK,WAAW;AAC7D,gBAAAC,kBAAiB,SAAS,MAAM;AAAA,cAClC;AAGA,oBAAM,gBAAgB;AAAA,gBACpB,wBAAwBF,WAAU;AAAA,gBAClC,gBAAgBA,WAAU,QAAQ;AAAA,gBAClC,mBAAmB;AAAA,gBACnB,OAAOA,WAAU,SAAS,SAAS;AAAA,gBACnC,OAAOA,WAAU,SAAS,SAAS;AAAA,gBACnC,MAAMA,WAAU,SAAS,QAAQ;AAAA,gBACjC,oBAAoBA,WAAU;AAAA,gBAC9B,WAAW;AAAA,gBACX,aAAY,oBAAI,KAAK,GAAE,YAAY;AAAA,cACrC;AAGA,kBAAIE,iBAAgB;AAClB,8BAAc,mBAAmBA;AACjC,wBAAQ,IAAI,sCAAiCA,eAAc;AAAA,cAC7D;AAGA,oBAAMH,YAAW,MAAM;AAAA,gBACrB,GAAG,YAAY;AAAA,gBACf;AAAA,kBACE,QAAQ;AAAA,kBACR,SAAS;AAAA,oBACP,UAAU;AAAA,oBACV,iBAAiB,UAAU,iBAAiB;AAAA,oBAC5C,gBAAgB;AAAA,oBAChB,UAAU;AAAA,kBACZ;AAAA,kBACA,MAAM,KAAK,UAAU,aAAa;AAAA,gBACpC;AAAA,cACF;AAEA,kBAAIA,UAAS,IAAI;AACf,wBAAQ,IAAI,4BAAuBC,WAAU,IAAI;AACjD,wBAAQ,YAAY;AAGpB,sBAAM,qBAAqB;AAE3B,2BAAW,MAAM;AACf,0BAAQ,YAAY;AACpB,0BAAQ,WAAW;AAAA,gBACrB,GAAG,GAAI;AAAA,cACT,OAAO;AACL,sBAAM,YAAY,MAAMD,UAAS,KAAK;AACtC,sBAAM,IAAI,MAAM,gBAAgB,SAAS,EAAE;AAAA,cAC7C;AAAA,YACF,SAAS,OAAO;AACd,sBAAQ,MAAM,4BAA4B,KAAK;AAC/C,sBAAQ,YAAY;AACpB,oBAAM,mBAAmB,MAAM,OAAO,EAAE;AACxC,yBAAW,MAAM;AACf,wBAAQ,YAAY;AACpB,wBAAQ,WAAW;AAAA,cACrB,GAAG,GAAI;AAAA,YACT;AAAA,UACF,CAAC;AAAA,QACH;AAGA,cAAM,qBAAqB;AAAA,MAC7B,OAAO;AAEL,YAAI;AAAa,sBAAY,UAAU,IAAI,QAAQ;AACnD,YAAI;AAAS,kBAAQ,UAAU,IAAI,QAAQ;AAC3C,YAAI,oBAAoB;AACtB,6BAAmB,cAAc;AACjC,6BAAmB,UAAU,OAAO,QAAQ;AAAA,QAC9C;AAAA,MACF;AAGA,YAAM,UAAU,QAAQ,cAAc,oBAAoB;AAC1D,UAAI,SAAS;AACX,gBAAQ,iBAAiB,SAAS,YAAY;AAC5C,gBAAM,WAAW,QAAQ,cAAc,sBAAsB;AAC7D,cAAI,UAAU;AACZ,gBAAI;AACF,oBAAM,UAAU,UAAU,UAAU,SAAS,KAAK;AAClD,oBAAM,eAAe,QAAQ;AAC7B,sBAAQ,cAAc;AACtB,yBAAW,MAAM;AACf,wBAAQ,cAAc;AAAA,cACxB,GAAG,GAAI;AAAA,YACT,SAAS,KAAK;AACZ,sBAAQ,MAAM,mBAAmB,GAAG;AACpC,sBAAQ,cAAc;AACtB,yBAAW,MAAM;AACf,wBAAQ,cAAc;AAAA,cACxB,GAAG,GAAI;AAAA,YACT;AAAA,UACF;AAAA,QACF,CAAC;AAAA,MACH;AAGA,UAAI,UAAU;AACZ,iBAAS,KAAK,kBAAkB,CAAC,OAAO,YAAY;AAClD,kBAAQ,IAAI,6DAAsD,KAAK;AAEvE,eAAK,WAAW;AAAA,QAClB,CAAC;AAAA,MACH;AAGA,iBAAW,QAAQ,UAAU,YAAY,CAAC,SAAS,QAAQ,iBAAiB;AAC1E,YAAI,QAAQ,WAAW,cAAc;AACnC,kBAAQ,IAAI,+DAAwD,QAAQ,aAAa;AAEzF,eAAK,WAAW;AAAA,QAClB;AAAA,MACF,CAAC;AAAA,IAEH,SAAS,OAAO;AACd,cAAQ,MAAM,+BAA+B,KAAK;AAClD,kBAAY,YAAY;AAAA;AAAA;AAAA,aAGf,MAAM,OAAO;AAAA;AAAA;AAAA,IAGxB;AAAA,EACF;",
  "names": ["response", "character", "supabase", "supabaseUserId"]
}
