{
  "version": 3,
  "sources": ["../../owlbear-extension/chat.js"],
  "sourcesContent": ["/**\r\n * OwlCloud Chat Window Script\r\n *\r\n * Standalone chat interface for OwlCloud\r\n */\r\n\r\n/* global OBR */\r\n\r\n// ============== State ==============\r\n\r\nlet currentCharacter = null;\r\nlet isOwlbearReady = false;\r\nlet currentPlayerId = null;\r\nlet lastLoadedMessageId = null;\r\n\r\n// Supabase configuration\r\nconst SUPABASE_URL = 'https://luiesmfjdcmpywavvfqm.supabase.co';\r\nconst SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx1aWVzbWZqZGNtcHl3YXZ2ZnFtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk4ODYxNDksImV4cCI6MjA4NTQ2MjE0OX0.oqjHFf2HhCLcanh0HVryoQH7iSV7E9dHHZJdYehxZ0U';\r\nconst SUPABASE_HEADERS = {\r\n  'apikey': SUPABASE_ANON_KEY,\r\n  'Content-Type': 'application/json'\r\n};\r\n\r\n// ============== DOM Elements ==============\r\n\r\nconst chatMessages = document.getElementById('chat-messages');\r\nconst chatInput = document.getElementById('chat-input');\r\nconst chatSendBtn = document.getElementById('chat-send-btn');\r\nconst chatCloseBtn = document.getElementById('chat-close-btn');\r\nconst characterNameEl = document.getElementById('character-name');\r\n\r\n// ============== Owlbear SDK Initialization ==============\r\n\r\nOBR.onReady(async () => {\r\n  isOwlbearReady = true;\r\n  console.log('\uD83E\uDD89 Owlbear SDK ready in chat window');\r\n\r\n  // Get player ID\r\n  currentPlayerId = await OBR.player.getId();\r\n\r\n  // Check for active character\r\n  await checkForActiveCharacter();\r\n\r\n  // Load chat history from metadata\r\n  await loadChatHistory();\r\n\r\n  // Listen for messages from character sheet\r\n  OBR.room.onMetadataChange((metadata) => {\r\n    const message = metadata['com.owlcloud.chat/latest-message'];\r\n    if (message && message.timestamp) {\r\n      handleCharacterSheetMessage(message);\r\n    }\r\n\r\n    // Listen for new chat messages\r\n    const messages = metadata['com.owlcloud.chat/messages'];\r\n    if (messages && Array.isArray(messages)) {\r\n      loadNewMessages(messages);\r\n    }\r\n  });\r\n\r\n  // Listen for roll mode changes from popover\r\n  OBR.player.onChange(async (player) => {\r\n    const rollMode = player.metadata?.['owlcloud.rollMode'];\r\n    updateRollModeIndicator(rollMode || 'normal');\r\n  });\r\n\r\n  // Set initial roll mode\r\n  const player = await OBR.player.getMetadata();\r\n  updateRollModeIndicator(player['owlcloud.rollMode'] || 'normal');\r\n});\r\n\r\n// ============== Character Management ==============\r\n\r\n/**\r\n * Check for active character\r\n */\r\nasync function checkForActiveCharacter() {\r\n  try {\r\n    const playerId = await OBR.player.getId();\r\n\r\n    const response = await fetch(\r\n      `${SUPABASE_URL}/functions/v1/characters?owlbear_player_id=${encodeURIComponent(playerId)}&fields=essential`,\r\n      { headers: SUPABASE_HEADERS }\r\n    );\r\n\r\n    if (!response.ok) {\r\n      console.error('Failed to get character:', response.statusText);\r\n      return;\r\n    }\r\n\r\n    const data = await response.json();\r\n\r\n    if (data.success && data.character) {\r\n      currentCharacter = data.character;\r\n      characterNameEl.textContent = currentCharacter.name || 'Unknown Character';\r\n    }\r\n  } catch (error) {\r\n    console.error('Error checking for active character:', error);\r\n  }\r\n}\r\n\r\n// ============== Message Handling ==============\r\n\r\nlet lastProcessedTimestamp = 0;\r\n\r\n/**\r\n * Handle messages from character sheet\r\n */\r\nfunction handleCharacterSheetMessage(message) {\r\n  // Prevent duplicate processing\r\n  if (message.timestamp <= lastProcessedTimestamp) {\r\n    return;\r\n  }\r\n  lastProcessedTimestamp = message.timestamp;\r\n\r\n  const characterName = message.character?.name || 'Character';\r\n\r\n  switch (message.type) {\r\n    case 'roll':\r\n      if (message.data) {\r\n        const { name, rolls, modifier, total } = message.data;\r\n        const rollsText = rolls.join(' + ');\r\n        const modText = modifier !== 0 ? ` ${modifier >= 0 ? '+' : ''}${modifier}` : '';\r\n        const text = `\uD83C\uDFB2 ${name}: ${rollsText}${modText} = <strong>${total}</strong>`;\r\n        addChatMessageToMetadata(text, 'roll', characterName);\r\n      }\r\n      break;\r\n\r\n    case 'action':\r\n      if (message.data) {\r\n        const { actionName, details } = message.data;\r\n        addChatMessageToMetadata(`\u2694\uFE0F ${actionName} - ${details}`, 'action', characterName);\r\n      }\r\n      break;\r\n\r\n    case 'spell':\r\n      if (message.data) {\r\n        const { spellName, level } = message.data;\r\n        const levelText = level === 0 ? 'Cantrip' : `Level ${level}`;\r\n        addChatMessageToMetadata(`\u2728 ${spellName} (${levelText})`, 'spell', characterName);\r\n      }\r\n      break;\r\n\r\n    case 'combat':\r\n      if (message.data && message.data.text) {\r\n        addChatMessageToMetadata(message.data.text, 'combat', characterName);\r\n      }\r\n      break;\r\n\r\n    default:\r\n      console.warn('Unknown message type:', message.type);\r\n  }\r\n}\r\n\r\n/**\r\n * Load chat history from room metadata\r\n */\r\nasync function loadChatHistory() {\r\n  try {\r\n    const metadata = await OBR.room.getMetadata();\r\n    const messages = metadata['com.owlcloud.chat/messages'];\r\n\r\n    if (messages && Array.isArray(messages)) {\r\n      messages.forEach(msg => {\r\n        displayChatMessage(msg.text, msg.type, msg.author, msg.timestamp, msg.details);\r\n        lastLoadedMessageId = msg.id;\r\n      });\r\n      scrollChatToBottom();\r\n    }\r\n  } catch (error) {\r\n    console.error('Error loading chat history:', error);\r\n  }\r\n}\r\n\r\n/**\r\n * Load new messages from metadata\r\n */\r\nfunction loadNewMessages(messages) {\r\n  if (!Array.isArray(messages)) return;\r\n\r\n  const newMessages = messages.filter(msg =>\r\n    !lastLoadedMessageId || msg.id > lastLoadedMessageId\r\n  );\r\n\r\n  newMessages.forEach(msg => {\r\n    displayChatMessage(msg.text, msg.type, msg.author, msg.timestamp, msg.details);\r\n    lastLoadedMessageId = msg.id;\r\n  });\r\n\r\n  if (newMessages.length > 0) {\r\n    scrollChatToBottom();\r\n  }\r\n}\r\n\r\n// ============== Chat Functions ==============\r\n\r\n/**\r\n * Scroll chat to bottom\r\n */\r\nfunction scrollChatToBottom() {\r\n  setTimeout(() => {\r\n    chatMessages.scrollTop = chatMessages.scrollHeight;\r\n  }, 100);\r\n}\r\n\r\n/**\r\n * Display a message in the chat UI (local only, doesn't save to metadata)\r\n * @param {string} text - Message text\r\n * @param {string} type - Message type: 'system', 'roll', 'action', 'spell', 'combat', 'user'\r\n * @param {string} author - Message author (optional)\r\n * @param {number} timestamp - Message timestamp (optional)\r\n */\r\nfunction displayChatMessage(text, type = 'system', author = null, timestamp = null, details = null) {\r\n  const messageDiv = document.createElement('div');\r\n  messageDiv.className = `chat-message ${type}`;\r\n\r\n  const now = timestamp ? new Date(timestamp) : new Date();\r\n  const timeStr = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });\r\n\r\n  // Build message HTML\r\n  let messageHTML = '';\r\n\r\n  if (author) {\r\n    messageHTML = `\r\n      <div class=\"chat-message-header\">\r\n        <span class=\"chat-message-author\">${author}</span>\r\n        <span class=\"chat-message-time\">${timeStr}</span>\r\n      </div>\r\n      <div class=\"chat-message-text\">${text}</div>\r\n    `;\r\n  } else {\r\n    messageHTML = `<div class=\"chat-message-text\">${text}</div>`;\r\n  }\r\n\r\n  // Add expandable details if present\r\n  if (details) {\r\n    const detailsHTML = typeof details === 'string' ? details : JSON.stringify(details, null, 2);\r\n    messageHTML += `\r\n      <div class=\"chat-message-details\" style=\"display: none; margin-top: 8px; padding-top: 8px; border-top: 1px solid rgba(138, 92, 246, 0.2); font-size: 12px; color: #aaa;\">\r\n        ${detailsHTML}\r\n      </div>\r\n    `;\r\n\r\n    // Make message clickable to toggle details\r\n    messageDiv.style.cursor = 'pointer';\r\n    messageDiv.title = 'Click to expand details';\r\n    messageDiv.onclick = function() {\r\n      const detailsEl = this.querySelector('.chat-message-details');\r\n      if (detailsEl) {\r\n        const isHidden = detailsEl.style.display === 'none';\r\n        detailsEl.style.display = isHidden ? 'block' : 'none';\r\n        this.title = isHidden ? 'Click to collapse' : 'Click to expand details';\r\n      }\r\n    };\r\n  }\r\n\r\n  messageDiv.innerHTML = messageHTML;\r\n  chatMessages.appendChild(messageDiv);\r\n\r\n  // Limit chat history to last 100 messages\r\n  const messages = chatMessages.querySelectorAll('.chat-message');\r\n  if (messages.length > 100) {\r\n    messages[0].remove();\r\n  }\r\n}\r\n\r\n/**\r\n * Add a message to chat and save to room metadata (shared with all players)\r\n * @param {string} text - Message text\r\n * @param {string} type - Message type: 'system', 'roll', 'action', 'spell', 'combat', 'user'\r\n * @param {string} author - Message author (optional)\r\n */\r\nasync function addChatMessageToMetadata(text, type = 'system', author = null) {\r\n  if (!isOwlbearReady) return;\r\n\r\n  try {\r\n    const metadata = await OBR.room.getMetadata();\r\n    const messages = metadata['com.owlcloud.chat/messages'] || [];\r\n\r\n    const newMessage = {\r\n      id: Date.now() + Math.random(), // Unique ID\r\n      text: text,\r\n      type: type,\r\n      author: author,\r\n      playerId: currentPlayerId,\r\n      timestamp: Date.now()\r\n    };\r\n\r\n    // Add to metadata (limit to last 100 messages)\r\n    const updatedMessages = [...messages, newMessage].slice(-100);\r\n\r\n    await OBR.room.setMetadata({\r\n      'com.owlcloud.chat/messages': updatedMessages\r\n    });\r\n  } catch (error) {\r\n    console.error('Error adding message to metadata:', error);\r\n  }\r\n}\r\n\r\n/**\r\n * Send a user message\r\n */\r\nasync function sendChatMessage() {\r\n  const text = chatInput.value.trim();\r\n  if (!text) return;\r\n\r\n  // Add user message to shared chat\r\n  const characterName = currentCharacter?.name || 'You';\r\n  await addChatMessageToMetadata(text, 'user', characterName);\r\n\r\n  // Clear input\r\n  chatInput.value = '';\r\n}\r\n\r\n// ============== Event Listeners ==============\r\n\r\nchatSendBtn.addEventListener('click', sendChatMessage);\r\n\r\nchatInput.addEventListener('keypress', (e) => {\r\n  if (e.key === 'Enter') {\r\n    sendChatMessage();\r\n  }\r\n});\r\n\r\nchatCloseBtn.addEventListener('click', async () => {\r\n  if (isOwlbearReady) {\r\n    try {\r\n      await OBR.popover.close('com.owlcloud.chat');\r\n    } catch (error) {\r\n      console.error('Error closing chat:', error);\r\n    }\r\n  }\r\n});\r\n\r\n// ============== Expose Chat Functions ==============\r\n\r\n// Expose chat functions for other windows to call\r\nwindow.owlcloudChat = {\r\n  addMessage: addChatMessageToMetadata,\r\n  announceRoll: async (rollName, formula, result) => {\r\n    const characterName = currentCharacter?.name || 'Character';\r\n    const text = `\uD83C\uDFB2 ${rollName}: ${formula} = <strong>${result}</strong>`;\r\n    await addChatMessageToMetadata(text, 'roll', characterName);\r\n  },\r\n  announceAction: async (actionName, details = '') => {\r\n    const characterName = currentCharacter?.name || 'Character';\r\n    const text = details ? `\u2694\uFE0F ${actionName} - ${details}` : `\u2694\uFE0F ${actionName}`;\r\n    await addChatMessageToMetadata(text, 'action', characterName);\r\n  },\r\n  announceSpell: async (spellName, level, details = '') => {\r\n    const characterName = currentCharacter?.name || 'Character';\r\n    const levelText = level === 0 ? 'Cantrip' : `Level ${level}`;\r\n    const text = details ? `\u2728 ${spellName} (${levelText}) - ${details}` : `\u2728 ${spellName} (${levelText})`;\r\n    await addChatMessageToMetadata(text, 'spell', characterName);\r\n  },\r\n  announceCombat: async (text) => {\r\n    const characterName = currentCharacter?.name || 'Character';\r\n    await addChatMessageToMetadata(text, 'combat', characterName);\r\n  }\r\n};\r\n\r\n// ============== Roll Mode Indicator ==============\r\n\r\n/**\r\n * Update the roll mode indicator badge\r\n */\r\nfunction updateRollModeIndicator(mode) {\r\n  const indicator = document.getElementById('roll-mode-indicator');\r\n  if (!indicator) return;\r\n\r\n  // Remove all mode classes\r\n  indicator.classList.remove('advantage', 'disadvantage');\r\n\r\n  // Set appropriate class and text\r\n  if (mode === 'advantage') {\r\n    indicator.classList.add('advantage');\r\n    indicator.textContent = 'ADV';\r\n  } else if (mode === 'disadvantage') {\r\n    indicator.classList.add('disadvantage');\r\n    indicator.textContent = 'DIS';\r\n  } else {\r\n    // Normal mode - hide indicator\r\n    indicator.textContent = '';\r\n  }\r\n}\r\n\r\nconsole.log('\uD83D\uDCAC Chat window initialized');\r\n"],
  "mappings": "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",
  "names": ["player"]
}
